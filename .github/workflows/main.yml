name: Jenkins Pipeline Trigger

on:
  push:
    branches:
      - main  # Replace with the branch you want to trigger the pipeline on

jobs:
  trigger-jenkins-pipeline:
    runs-on: ubuntu-latest

    steps:
      - name: Trigger Jenkins Pipeline
        env:
          JENKINS_WEBHOOK_SECRET: ${{ secrets.JENKINS_WEBHOOK_SECRET }}
        run: |
          curl -X POST -H "X-Hub-Signature: sha1=$(echo -n $JENKINS_WEBHOOK_SECRET | openssl sha1 -hmac $JENKINS_WEBHOOK_SECRET)" http://20.62.95.207:8080/github-webhook/  
